 <span id="mulu"></span>

 # 如何创建你自己的角色                

[1. 入门](#1)  
 
[2. 基本概念](#2)  
 
[3. 层次](#3) 
 
[4. 如何创建一个代理](#4) 

<p id="1"></p>  

 ![示例图片](/images/howtocharacter-1.png)
TopDown Engine中的“代理”是一个用于描述任何类型的角色的术语，无论他们是可玩角色，还是敌人，npc等等。有一些核心职业可以让这些代理工作，如果你想要扩展和创造更多角色能力，你就需要熟悉这些职业。

同时，本页面旨在展示基本概念，并允许您快速创建自己的角色(玩家控制或基于AI)。

[返回目录](#mulu) 

## 创造一个基本的2D可玩角色

重新安装2019.3.3f1

导入语音v1.10.1

打开Minimal2D演示场景

创建一个新的，空的游戏对象，定位在40，-20,0，叫它Test

创建一个新的精灵对象，将其精灵设置为adventer_0，排序层设置为Characters，将其嵌套在Test中，即0,0,0

在测试中，添加一个字符组合

按自动构建玩家角色2D

拖动NewSprite到CharacterModel插槽

在CharacterOrientation2D下，设置面向模式为MovementDirection，勾选模型应该翻转

打开考拉预制件，复制脚步节点

粘贴到你的场景中

嵌套在Test下，0,0,0

媒体播放

## 创建一个基本的3D可玩角色

重新安装2019.3.3f1

导入语音v1.10.1

打开MinimalScene3D演示场景

创建一个新的，空的游戏对象，将它定位在0,0,0，叫它Test

创建一个新的立方体，拖到Test下，定位到0,0,0，命名为Model，移除它的BoxCollider

在测试中，添加一个字符组合

按自动构建玩家角色3D

在字符组件上，将模型拖到字符模型槽中

在CharacterOrientation3D下，设置旋转模式为MovementDirection，拖动模型到运动旋转模型槽中

在项目面板中拖动测试对象，使其成为预制构件，并将其从场景中移除

选择LevelManager，将新的预制件拖放到playerprefab的第一个数组条目中

按播放，享受你的新朋友

## 创建一个基本的2.5D可玩角色

如果你想创造一个在3D世界中进化的角色，但却以精灵的形式出现(游戏邦注:比如《纸马里奥》)，你可以这样做:

重新安装2019.4.39f1

导入语音v3.0

打开MinimalScene3D演示场景

创建一个新的，空的游戏对象，将它定位在0,0,0，叫它Test

创建一个空的子对象，命名为Model

创建一个新的精灵渲染器，设置它的精灵为Koala_Idle_0，把它拖到模型下，定位到0,0,0，命名为MySprite

在测试中，添加一个字符组合

按自动构建玩家角色3D

在Test的Character组件上，拖动Model节点到CharacterModel槽中

在测试中，删除CharacterOrientation3D组件，添加一个CharacterOrientation2D，设置FacingMode:MovementDirection, ModelShouldFlip:true

在MySprite上添加一个MMBillboard组件，NestObject:false, OffsetDirection:0,0,1

在你的项目面板中拖动测试对象，使其成为一个预制构件，将其从场景中移除

选择LevelManager，将新的预制件拖到playerprefab的第一个数组条目中，按下play键，享受你的2.5D新好友

## 创造一个基本的3D敌人

重新安装2019.3.3f1

import TopDown Engine v1.10.1

打开Loft3D演示场景

创建一个空的游戏对象，设置为-9.5,1.5,0

创建一个立方体，设置它的比例为2,2,2，设置在空的下面

将空白重命名为“Test”

在测试中，添加一个字符组合

按下自动构建AI角色3D按钮

在字符检查器中，将字符模型设置为立方体

按下播放键，拿起旁边的猎枪，尽情享受吧

[返回目录](#mulu) 

<p id="2"></p>              

## 2. 基本概念
 
TDE设计用于2D和3D项目。你将用于为一个设置或另一个创建角色的组件将基本相同，但有些将特定于2D或3D。当你遇到一个组件或能力时，如果它的名字中没有2D或3D元素，你便可以假设它能够同时适用于这两种元素。否则，你将希望只在2D中使用名称中含有2D的组件，而只在3D中使用名称中含有3D的组件。

 ![示例图片](/images/howtocharacter-2.png)

这一页将详细介绍角色的强制组件，但这里有一个简短的纲要。TopDown Engine中的代理通常有以下组件:

一个碰撞器:2D中的BoxCollider2D或CircleCollider2D, 3D中的CharacterController，这个碰撞器的大小用于确定碰撞以及代理在世界中的位置。

RigidBody2D或3D:仅用于提供标准物理的基本交互(完全可选)

TopDownController:负责碰撞检测，基本移动(左右移动)，重力，TopDownController是你角色的运动类。它有2D和3D两种版本，但两者的方法和逻辑相同。注意，3D版本需要一个CharacterController组件。

特性:这是连接所有其他类的中心类。它本身没有什么作用，但它实际上是一个中心点。在这里你可以定义玩家是AI还是受玩家控制，它的模型和动画师在哪里等等。它也是在运行时控制所有角色能力的类。

生命值:不是强制的，但在大多数游戏中你的代理人是可以死亡的。生命值组件处理伤害、生命值的增加/减少以及最终的死亡。

角色能力:到目前为止，所有之前的组件都提供了许多可能性，但并没有真正“执行”任何可见的内容。这就是角色能力的作用。该资产包含超过15种能力，从简单的角色移动到复杂的武器操作。它们都是可选的，你可以选择你想要的。当然，你也可以轻松创造自己的能力去创造属于自己的游戏
 
[返回目录](#mulu)   

<p id="3"></p> 

## 层次

 ![示例图片](/images/howtocharacter-6.png)

无论你如何创造你的角色，有一件事是非常重要的，那就是理解如何构造它。你需要将逻辑(RigidBody, TopDownController，角色能力等)与视觉效果(你的模型/精灵/ Spine设置等)分离开来。你可以有更多的层(也许你的动画师坐在自己的层上，等等)，但推荐的设置是上面的图片:一个包含所有逻辑的顶层，模型嵌套在里面。

 ![示例图片](/images/howtocharacter-7.png)
确保你从检查器中将模型链接到角色类，动画师也是如此。其他一些类(定向能力，生命值)也可能需要你通过检查器告诉他们模型或动画师在哪里。

[返回目录](#mulu)   

<p id="4"></p> 

## 如何创建一个代理

在TDE中有许多方法可以创造一个可玩的或AI角色。这里我们将介绍3种推荐的方法。请注意，如果你更喜欢不同的做法，只要它对你有效，就没问题。

 ![示例图片](/images/howtocharacter-3.png)
 你可以使用AddComponent菜单来添加大多数TopDown Engine的组件(不仅仅是字符组件)

 自动创建

“自动构建字符”功能允许您在几秒钟内创建一个新角色。请注意，在初始设置之后，您仍然需要设置动画和所有这些。

下面是如何进行的:
 ![示例图片](/images/howtocharacter-4.png)

 对3D:

打开MinimalScene3D演示场景(或任何满足最小要求的场景

创建一个空的游戏对象，命名为“Test”，位置为0,0.5,0

在它下面添加一个立方体，居中，缩放到1,2,1，移除它的BoxCollider

在测试中，添加一个字符组合，将立方体拖到它的字符模型槽中

在角色检查器上，按自动构建玩家角色3D

运行

对于2D:

打开Minimal2D演示场景(或任何满足最低要求的场景)

创建一个空的游戏对象，命名为“Test”，将其放置在场景中

在它下面添加一个游戏对象，将其居中，命名为“模型”，添加一个精灵渲染器并设置它的精灵

在Test中，添加一个Character comp，将精灵拖到它的CharacterModel槽中

在角色检查器上，按自动构建玩家角色2D

运行

 
当然，对于AI来说也是一样的，除了你会选择自动构建AI角色2D/3D。如果你想要创造一个AI角色，它便需要拥有一个大脑以及一些行动和决定。你现在可以微调各种设置，删除你不感兴趣的能力为这个角色，添加动画，等等。或者你也可以不去管它，开始创建游戏和关卡的其余部分

拷贝

另一种快速创建代理的方法是在演示中找到您喜欢的代理，并从中创建您的代理。这个过程非常简单:
 ![示例图片](/images/howtocharacter-5.png)
 
 找一个你喜欢的代理。

找到它的预制件(在场景视图中选择Agent，在它的检查器中，在预制件名称和标签的右上角有一个选择按钮)

复制预制(cmd + D)

重命名为任何你想要你的角色被称为

做出你想要的改变。也许你只是想替换一些设置，也许你想改变精灵和动画。接下来就看你的了

组件的方法
你也可以从头开始创建一个角色。它更复杂，但为什么不呢?

从一个空的游戏物体开始。理想情况下，你应该将角色部分与视觉部分分开。最好的层次结构应该将TopDownController/Collider/Character/Abilities置于顶层，然后嵌入视觉部分(精灵、模型等)。

在检查器的顶部，如果是玩家角色，将标签设置为Player，如果不是，则设置为其他你喜欢的标签。图层也是一样。

在你的顶级对象中添加一个Collider(游戏邦注:无论是2D还是3D，我们建议为3D角色添加一个Capsule，为2D角色添加一个box)。调整它的大小以匹配你的精灵/模型尺寸。然后添加一个RigidBody2D或RigidBody组件。

添加一个TopDownController (2D或3D)组件。设置各种设置(如果你需要帮助，请参阅类文档)，并确保设置各种碰撞掩码(平台，单向等)。如果你想制作3D，也要添加一个CharacterController组件。

添加一个字符组件。检查各种设置，确保它们对您来说是合适的。

添加你想要的角色能力(最好使用检查器底部的AddComponent按钮，并在那里导航)

可以选择添加健康状态组件、健康条组件等。

[返回目录](#mulu)   

